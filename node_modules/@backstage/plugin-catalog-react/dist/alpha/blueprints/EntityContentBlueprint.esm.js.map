{"version":3,"file":"EntityContentBlueprint.esm.js","sources":["../../../src/alpha/blueprints/EntityContentBlueprint.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  coreExtensionData,\n  createExtensionBlueprint,\n  ExtensionBoundary,\n  RouteRef,\n} from '@backstage/frontend-plugin-api';\nimport { catalogExtensionData } from '../extensions';\n\n/**\n * @alpha\n * Creates an EntityContent extension.\n */\nexport const EntityContentBlueprint = createExtensionBlueprint({\n  kind: 'entity-content',\n  attachTo: { id: 'page:catalog/entity', input: 'contents' },\n  output: [\n    coreExtensionData.reactElement,\n    coreExtensionData.routePath,\n    catalogExtensionData.entityContentTitle,\n    coreExtensionData.routeRef.optional(),\n    catalogExtensionData.entityFilterFunction.optional(),\n    catalogExtensionData.entityFilterExpression.optional(),\n  ],\n  dataRefs: {\n    title: catalogExtensionData.entityContentTitle,\n    filterFunction: catalogExtensionData.entityFilterFunction,\n    filterExpression: catalogExtensionData.entityFilterExpression,\n  },\n  config: {\n    schema: {\n      path: z => z.string().optional(),\n      title: z => z.string().optional(),\n      filter: z => z.string().optional(),\n    },\n  },\n  *factory(\n    {\n      loader,\n      defaultPath,\n      defaultTitle,\n      filter,\n      routeRef,\n    }: {\n      loader: () => Promise<JSX.Element>;\n      defaultPath: string;\n      defaultTitle: string;\n      routeRef?: RouteRef;\n      filter?:\n        | typeof catalogExtensionData.entityFilterFunction.T\n        | typeof catalogExtensionData.entityFilterExpression.T;\n    },\n    { node, config },\n  ) {\n    const path = config.path ?? defaultPath;\n    const title = config.title ?? defaultTitle;\n\n    yield coreExtensionData.reactElement(ExtensionBoundary.lazy(node, loader));\n\n    yield coreExtensionData.routePath(path);\n\n    yield catalogExtensionData.entityContentTitle(title);\n\n    if (routeRef) {\n      yield coreExtensionData.routeRef(routeRef);\n    }\n\n    if (config.filter) {\n      yield catalogExtensionData.entityFilterExpression(config.filter);\n    } else if (typeof filter === 'string') {\n      yield catalogExtensionData.entityFilterExpression(filter);\n    } else if (typeof filter === 'function') {\n      yield catalogExtensionData.entityFilterFunction(filter);\n    }\n  },\n});\n"],"names":[],"mappings":";;;AA4BO,MAAM,yBAAyB,wBAAyB,CAAA;AAAA,EAC7D,IAAM,EAAA,gBAAA;AAAA,EACN,QAAU,EAAA,EAAE,EAAI,EAAA,qBAAA,EAAuB,OAAO,UAAW,EAAA;AAAA,EACzD,MAAQ,EAAA;AAAA,IACN,iBAAkB,CAAA,YAAA;AAAA,IAClB,iBAAkB,CAAA,SAAA;AAAA,IAClB,oBAAqB,CAAA,kBAAA;AAAA,IACrB,iBAAA,CAAkB,SAAS,QAAS,EAAA;AAAA,IACpC,oBAAA,CAAqB,qBAAqB,QAAS,EAAA;AAAA,IACnD,oBAAA,CAAqB,uBAAuB,QAAS,EAAA;AAAA,GACvD;AAAA,EACA,QAAU,EAAA;AAAA,IACR,OAAO,oBAAqB,CAAA,kBAAA;AAAA,IAC5B,gBAAgB,oBAAqB,CAAA,oBAAA;AAAA,IACrC,kBAAkB,oBAAqB,CAAA,sBAAA;AAAA,GACzC;AAAA,EACA,MAAQ,EAAA;AAAA,IACN,MAAQ,EAAA;AAAA,MACN,IAAM,EAAA,CAAA,CAAA,KAAK,CAAE,CAAA,MAAA,GAAS,QAAS,EAAA;AAAA,MAC/B,KAAO,EAAA,CAAA,CAAA,KAAK,CAAE,CAAA,MAAA,GAAS,QAAS,EAAA;AAAA,MAChC,MAAQ,EAAA,CAAA,CAAA,KAAK,CAAE,CAAA,MAAA,GAAS,QAAS,EAAA;AAAA,KACnC;AAAA,GACF;AAAA,EACA,CAAC,OACC,CAAA;AAAA,IACE,MAAA;AAAA,IACA,WAAA;AAAA,IACA,YAAA;AAAA,IACA,MAAA;AAAA,IACA,QAAA;AAAA,GAUF,EAAA,EAAE,IAAM,EAAA,MAAA,EACR,EAAA;AACA,IAAM,MAAA,IAAA,GAAO,OAAO,IAAQ,IAAA,WAAA,CAAA;AAC5B,IAAM,MAAA,KAAA,GAAQ,OAAO,KAAS,IAAA,YAAA,CAAA;AAE9B,IAAA,MAAM,kBAAkB,YAAa,CAAA,iBAAA,CAAkB,IAAK,CAAA,IAAA,EAAM,MAAM,CAAC,CAAA,CAAA;AAEzE,IAAM,MAAA,iBAAA,CAAkB,UAAU,IAAI,CAAA,CAAA;AAEtC,IAAM,MAAA,oBAAA,CAAqB,mBAAmB,KAAK,CAAA,CAAA;AAEnD,IAAA,IAAI,QAAU,EAAA;AACZ,MAAM,MAAA,iBAAA,CAAkB,SAAS,QAAQ,CAAA,CAAA;AAAA,KAC3C;AAEA,IAAA,IAAI,OAAO,MAAQ,EAAA;AACjB,MAAM,MAAA,oBAAA,CAAqB,sBAAuB,CAAA,MAAA,CAAO,MAAM,CAAA,CAAA;AAAA,KACjE,MAAA,IAAW,OAAO,MAAA,KAAW,QAAU,EAAA;AACrC,MAAM,MAAA,oBAAA,CAAqB,uBAAuB,MAAM,CAAA,CAAA;AAAA,KAC1D,MAAA,IAAW,OAAO,MAAA,KAAW,UAAY,EAAA;AACvC,MAAM,MAAA,oBAAA,CAAqB,qBAAqB,MAAM,CAAA,CAAA;AAAA,KACxD;AAAA,GACF;AACF,CAAC;;;;"}