{"version":3,"file":"createAppRootWrapperExtension.esm.js","sources":["../../src/extensions/createAppRootWrapperExtension.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ComponentType, PropsWithChildren } from 'react';\nimport { PortableSchema } from '../schema/types';\nimport {\n  AnyExtensionInputMap,\n  ExtensionDefinition,\n  ResolvedExtensionInputs,\n  createExtension,\n} from '../wiring/createExtension';\nimport { Expand } from '../types';\nimport { AppRootWrapperBlueprint } from '../blueprints/AppRootWrapperBlueprint';\n\n/**\n * Creates an extension that renders a React wrapper at the app root, enclosing\n * the app layout. This is useful for example for adding global React contexts\n * and similar.\n *\n * @public\n * @deprecated Use {@link AppRootWrapperBlueprint} instead.\n */\nexport function createAppRootWrapperExtension<\n  TConfig extends {},\n  TInputs extends AnyExtensionInputMap,\n>(options: {\n  namespace?: string;\n  name?: string;\n  attachTo?: { id: string; input: string };\n  configSchema?: PortableSchema<TConfig>;\n  disabled?: boolean;\n  inputs?: TInputs;\n  Component: ComponentType<\n    PropsWithChildren<{\n      inputs: Expand<ResolvedExtensionInputs<TInputs>>;\n      config: TConfig;\n    }>\n  >;\n}): ExtensionDefinition<TConfig> {\n  return createExtension({\n    kind: 'app-root-wrapper',\n    namespace: options.namespace,\n    name: options.name,\n    attachTo: options.attachTo ?? { id: 'app/root', input: 'wrappers' },\n    configSchema: options.configSchema,\n    disabled: options.disabled,\n    inputs: options.inputs,\n    output: {\n      component: AppRootWrapperBlueprint.dataRefs.component,\n    },\n    factory({ inputs, config }) {\n      const Component = (props: PropsWithChildren<{}>) => {\n        return (\n          <options.Component inputs={inputs} config={config}>\n            {props.children}\n          </options.Component>\n        );\n      };\n      return {\n        component: Component,\n      };\n    },\n  });\n}\n\n/**\n * @public\n * @deprecated Use {@link AppRootWrapperBlueprint} instead.\n */\nexport namespace createAppRootWrapperExtension {\n  /**\n   * @deprecated Use {@link AppRootWrapperBlueprint} instead.\n   */\n  export const componentDataRef = AppRootWrapperBlueprint.dataRefs.component;\n}\n"],"names":["createAppRootWrapperExtension"],"mappings":";;;;AAmCO,SAAS,8BAGd,OAa+B,EAAA;AAC/B,EAAA,OAAO,eAAgB,CAAA;AAAA,IACrB,IAAM,EAAA,kBAAA;AAAA,IACN,WAAW,OAAQ,CAAA,SAAA;AAAA,IACnB,MAAM,OAAQ,CAAA,IAAA;AAAA,IACd,UAAU,OAAQ,CAAA,QAAA,IAAY,EAAE,EAAI,EAAA,UAAA,EAAY,OAAO,UAAW,EAAA;AAAA,IAClE,cAAc,OAAQ,CAAA,YAAA;AAAA,IACtB,UAAU,OAAQ,CAAA,QAAA;AAAA,IAClB,QAAQ,OAAQ,CAAA,MAAA;AAAA,IAChB,MAAQ,EAAA;AAAA,MACN,SAAA,EAAW,wBAAwB,QAAS,CAAA,SAAA;AAAA,KAC9C;AAAA,IACA,OAAQ,CAAA,EAAE,MAAQ,EAAA,MAAA,EAAU,EAAA;AAC1B,MAAM,MAAA,SAAA,GAAY,CAAC,KAAiC,KAAA;AAClD,QAAA,2CACG,OAAQ,CAAA,SAAA,EAAR,EAAkB,MAAgB,EAAA,MAAA,EAAA,EAChC,MAAM,QACT,CAAA,CAAA;AAAA,OAEJ,CAAA;AACA,MAAO,OAAA;AAAA,QACL,SAAW,EAAA,SAAA;AAAA,OACb,CAAA;AAAA,KACF;AAAA,GACD,CAAA,CAAA;AACH,CAAA;AAAA,CAMO,CAAUA,8BAAV,KAAA;AAIE,EAAMA,8BAAAA,CAAA,gBAAmB,GAAA,uBAAA,CAAwB,QAAS,CAAA,SAAA,CAAA;AAAA,CAJlD,EAAA,6BAAA,KAAA,6BAAA,GAAA,EAAA,CAAA,CAAA;;;;"}